%h2 Active User Growth Rate

%p
  The following measures Thrively's weekly metrics against
  = link_to "Paul Graham's 5% target growth rate", 'http://www.paulgraham.com/growth.html'
  for active users.
%p
  An active user on Thrively is someone who receives solicited
  feedback in that week.

%table.table.table-hover.metrics
  %tr
    %td Nov 19
    %td Nov 26
    %td Dec 3
    %td Dec 10
  %tr
    %td 1%
    %td 2%
    %td 3%
    %td 4%

#growth_rate

- content_for :javascript do
  :javascript

    $('#growth_rate').sparkline([5,6,7,9,9,5,3,2,2,4,6,7], {
      type: 'line',
      width: '100%',
      height: '50',
      lineColor: '#3366cc',
      fillColor: null,
      lineWidth: 2,
      spotColor: '#ff0000',
      minSpotColor: null,
      maxSpotColor: null,
      highlightSpotColor: undefined,
      highlightLineColor: undefined,
      spotRadius: 3,
      normalRangeMin: 4,
      normalRangeMax: 6,
      normalRangeColor: '#e5e5e5'
    });

%h2 Active Users

#active_users{ style: 'width: 100%; height: 500px;' }

- content_for :javascript do
  %script{ src: '//www.google.com/jsapi', type: 'text/javascript' }

  :javascript
    google.load('visualization', '1', { packages:['corechart'] });
    google.setOnLoadCallback(drawChart);

    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ['Nov 19', 1],
        ['Nov 26', 2],
        ['Dec 3', 3],
        ['Dec 10', 4]
      ], true);

      options = {
        legend: { position: 'none' },
        vAxis: { minValue: 0, maxValue: 10 }
      };

      var chart = new google.visualization.LineChart(
        document.getElementById('active_users')
      );
      chart.draw(data, options);
    }
